# this may be excessive use of anchors but if we change
# names and such we can do it all here
turbine_info:
 - &hub_0: [795, 800, 90]
   &tower_0: [800, 800, 0]
   &openfast_rst0: "turb0_rst.5760"
   &forces0: "forces_00.dat"
   &output0: "out01/turb0.e"
   &restart0: "out01/turb0.rst"
   &log0: "turb0_nalu.log"
 - &hub_1: [1595, 1000, 90]
   &tower_1: [1600, 1000, 0]
   &openfast_rst0: "turb1_rst.5760"
   &forces0: "forces_01.dat"
   &output0: "out01/turb1.e"
   &restart0: "out01/turb1.rst"
   &log0: "turb1_nalu.log"
 - &hub_2: [995, 1600, 90]
   &tower_2: [1000, 1600, 0]
   &openfast_rst0: "turb2_rst.5760"
   &forces0: "forces_02.dat"
   &output0: "out01/turb2.e"
   &restart0: "out01/turb2.rst"
   &log0: "turb2_nalu.log"
 - &hub_3: [1795, 1800, 90]
   &tower_3: [1800, 1800, 0]
   &openfast_rst0: "turb3_rst.5760"
   &forces0: "forces_03.dat"
   &output0: "out01/turb3.e"
   &restart0: "out01/turb3.rst"
   &log0: "turb3_nalu.log"

exawind:
  nalu_wind_inp:
  ### Turb 0 ###
  - base_input_file: nrel5mw.yaml
    logfile: *log0
    replace:
      realms:
      - mesh_transformation:
        # turbine rotor position
        - motion: [~#rotation, displacement: *hub_0]
        # tower placement
        - - motion: [~#rotation, displacement: *tower_0]
        openfast_fsi:
          Turbine0:
            turbine_base_pos: *tower_0
            turbine_hub_pos: *hub_0
            restart_filename: *openfast_rst0
        post_processing:
        - output_file_name: *forces0
          parameters: *hub_0
        output: {output_data_base_name: *output0}
        restart: {restart_data_base_name: *restart0}
  ### Turb 1 ###
  - base_input_file: nrel5mw.yaml
    logfile: *log1
    replace:
      realms:
      - mesh_transformation:
        # turbine rotor position
        - motion: [~#rotation, displacement: *hub_1]
        # tower placement
        - - motion: [~#rotation, displacement: *tower_1]
        openfast_fsi:
          Turbine0:
            turbine_base_pos: *tower_1
            turbine_hub_pos: *hub_1
            restart_filename: *openfast_rst1
        post_processing:
        - output_file_name: *forces1
          parameters: *hub_1
        output: {output_data_base_name: *output1}
        restart: {restart_data_base_name: *restart1}
  ### Turb 2 ###
  - base_input_file: nrel5mw.yaml
    logfile: *log2
    replace:
      realms:
      - mesh_transformation:
        # turbine rotor position
        - motion: [~#rotation, displacement: *hub_2]
        # tower placement
        - - motion: [~#rotation, displacement: *tower_2]
        openfast_fsi:
          Turbine0:
            turbine_base_pos: *tower_2
            turbine_hub_pos: *hub_2
            restart_filename: *openfast_rst2
        post_processing:
        - output_file_name: *forces2
          parameters: *hub_2
        output: {output_data_base_name: *output2}
        restart: {restart_data_base_name: *restart2}
  ### Turb 3 ###
  - base_input_file: nrel5mw.yaml
    logfile: *log3
    replace:
      realms:
      - mesh_transformation:
        # turbine rotor position
        - motion: [~#rotation, displacement: *hub_3]
        # tower placement
        - - motion: [~#rotation, displacement: *tower_3]
        openfast_fsi:
          Turbine0:
            turbine_base_pos: *tower_3
            turbine_hub_pos: *hub_3
            restart_filename: *openfast_rst3
        post_processing:
        - output_file_name: *forces3
          parameters: *hub_3
        output: {output_data_base_name: *output3}
        restart: {restart_data_base_name: *restart3}
  ### AMR-WIND ###
  amr_wind_inp: nrel5mw_amr.inp
  num_timesteps: 1440
  nonlinear_iterations: 1

  # Variables for overset exchange
  nalu_vars:
    - velocity
    - turbulent_ke
    - specific_dissipation_rate
    - pressure
  amr_cell_vars:
    - velocity
    - tke
    - sdr
  amr_node_vars:
    - p
    
